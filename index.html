<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vote na Pr√≥xima M√∫sica</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #000;
  color: #fff;
  text-align: center;
  padding: 20px;
}

h1 { margin-bottom: 30px; }

.categoria {
  margin-top: 40px;
  font-size: 22px;
  font-weight: bold;
  color: #00ff88;
}

button {
  display: block;
  width: 95%;
  max-width: 600px;
  margin: 5px auto;
  padding: 10px;
  font-size: 15px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: #e10600;
  color: white;
}

button:hover { background: #ff3b30; }
button:disabled { background: gray; cursor: not-allowed; }

#message {
  font-size: 22px;
  margin-top: 20px;
  color: #00ff88;
  font-weight: bold;
}

.rankItem { margin: 3px 0; }
</style>
</head>

<body>

<h1>üéµ Vote na pr√≥xima m√∫sica</h1>
<div id="buttons"></div>
<div id="message"></div>

<h2>üî• Ranking ao Vivo</h2>
<div id="rankingList"></div>

<script>
const firebaseConfig = {
  apiKey: "SUA_KEY",
  authDomain: "SEU_AUTH",
  databaseURL: "SEU_DATABASE_URL",
  projectId: "SEU_PROJECT_ID"
};

firebase.initializeApp(firebaseConfig);
const database = firebase.database();

const categorias = {

"üáßüá∑ Rock Nacional": [
"Os Paralamas do Sucesso ‚Äì Meu Erro",
"Skank ‚Äì Garota Nacional",
"Skank ‚Äì Sutilmente",
"Lob√£o ‚Äì Me Chama",
"Bar√£o Vermelho ‚Äì Bete Balan√ßo",
"Frejat ‚Äì Segredos",
"Legi√£o Urbana ‚Äì Pais E Filhos",
"Cazuza ‚Äì Exagerado",
"Tit√£s ‚Äì Pra Dizer Adeus",
"Lob√£o ‚Äì Bl√°, Bl√°, Bl√°... Eu Te Amo",
"Lob√£o ‚Äì R√°dio Bl√°"
],

"üáßüá∑ MPB / Soul Nacional": [
"Tim Maia ‚Äì Gostava Tanto de Voc√™",
"Tim Maia ‚Äì Primavera (Vai Chuva)",
"Djavan ‚Äì Lil√°s"
],

"üé∏ Grunge / Alternative 90s": [
"Nirvana ‚Äì Smells Like Teen Spirit",
"Nirvana ‚Äì Come As You Are",
"Nirvana ‚Äì Heart-Shaped Box",
"Nirvana ‚Äì About A Girl",
"Nirvana ‚Äì Drain You",
"Pearl Jam ‚Äì Soldier of Love",
"Pearl Jam ‚Äì Last Kiss",
"Pearl Jam ‚Äì Black",
"Alice In Chains ‚Äì Man In The Box",
"Alice In Chains ‚Äì Would?",
"Alice In Chains ‚Äì Down In A Hole",
"Stone Temple Pilots ‚Äì Plush",
"Stone Temple Pilots ‚Äì Interstate Love Song",
"Stone Temple Pilots ‚Äì Creep",
"Queens of the Stone Age ‚Äì No One Knows",
"Queens of the Stone Age ‚Äì Make It Wit Chu",
"Green Day ‚Äì American Idiot",
"The Smashing Pumpkins ‚Äì 1979",
"Foo Fighters ‚Äì Everlong",
"Radiohead ‚Äì Creep"
],

"üé∏ Rock Cl√°ssico Internacional": [
"Elvis Presley ‚Äì Suspicious Minds",
"The Beatles ‚Äì Come Together",
"The Beatles ‚Äì Hey Jude",
"The Beatles ‚Äì Let It Be",
"Pink Floyd ‚Äì Wish You Were Here",
"Lynyrd Skynyrd ‚Äì Sweet Home Alabama",
"Lynyrd Skynyrd ‚Äì Simple Man",
"Creedence Clearwater Revival ‚Äì Proud Mary",
"Creedence Clearwater Revival ‚Äì Have You Ever Seen The Rain",
"Creedence Clearwater Revival ‚Äì Suzie Q",
"Creedence Clearwater Revival ‚Äì Born On The Bayou",
"Creedence Clearwater Revival ‚Äì Bad Moon Rising",
"Creedence Clearwater Revival ‚Äì Fortunate Son",
"The Rolling Stones ‚Äì Anybody Seen My Baby?",
"Cream ‚Äì White Room",
"Cream ‚Äì Sunshine Of Your Love",
"Led Zeppelin ‚Äì Immigrant Song",
"Led Zeppelin ‚Äì Rock And Roll",
"The Doors ‚Äì Roadhouse Blues",
"The Doors ‚Äì Love Me Two Times",
"The Doors ‚Äì Riders On The Storm",
"Black Sabbath ‚Äì Paranoid",
"Eric Clapton ‚Äì Cocaine",
"Tom Petty ‚Äì Runnin' Down A Dream",
"Foghat ‚Äì Slow Ride",
"Queen ‚Äì Another One Bites The Dust"
],

"üé§ Pop / 80s / 2000s": [
"U2 ‚Äì With Or Without You",
"U2 ‚Äì Helter Skelter",
"The Police ‚Äì Roxanne",
"The Police ‚Äì Every Breath You Take",
"INXS ‚Äì Never Tear Us Apart",
"INXS ‚Äì Need You Tonight",
"Phil Collins ‚Äì I Don't Care Anymore",
"Foreigner ‚Äì I Want To Know What Love Is",
"The Outfield ‚Äì Your Love",
"Blur ‚Äì Coffee & TV",
"Oasis ‚Äì Wonderwall",
"Kings of Leon ‚Äì Closer",
"Natalie Imbruglia ‚Äì Torn",
"Maroon 5 ‚Äì Sugar",
"Lenny Kravitz ‚Äì It Ain't Over 'Til It's Over",
"Lenny Kravitz ‚Äì Fly Away",
"Sugar Ray ‚Äì Every Morning",
"Spin Doctors ‚Äì Two Princes",
"Tears For Fears ‚Äì Everybody Wants To Rule The World",
"Survivor ‚Äì Eye Of The Tiger"
],

"üï∫ Soul / Funk / Dance": [
"Ben E. King ‚Äì Stand By Me",
"Commodores ‚Äì Easy",
"Daft Punk ‚Äì Get Lucky",
"Modjo ‚Äì Lady",
"Jimmy Cliff ‚Äì I Can See Clearly Now",
"Mike + The Mechanics ‚Äì Over My Shoulder",
"Chris Isaak ‚Äì Wicked Game",
"The White Stripes ‚Äì Seven Nation Army"
]

};

const container = document.getElementById("buttons");
const message = document.getElementById("message");
let bloqueado = false;

if(location.search.includes("reset=12345")){
  database.ref("ranking").set({});
  alert("Ranking zerado!");
}

Object.keys(categorias).forEach(categoria => {

  const titulo = document.createElement("div");
  titulo.className = "categoria";
  titulo.innerText = categoria;
  container.appendChild(titulo);

  categorias[categoria].forEach(musica => {

    const btn = document.createElement("button");
    btn.innerText = musica;

    btn.onclick = function() {
      if (bloqueado) return;
      bloqueado = true;

      const ref = database.ref("ranking/" + musica);
      ref.transaction(current => (current || 0) + 1);

      let tempo = 5;
      message.innerText = "‚úÖ Voto computado! Pr√≥ximo voto em " + tempo + "s";
      document.querySelectorAll("button").forEach(b => b.disabled = true);

      const contador = setInterval(() => {
        tempo--;
        message.innerText = "‚è≥ Pr√≥ximo voto em " + tempo + "s";

        if (tempo <= 0) {
          clearInterval(contador);
          bloqueado = false;
          message.innerText = "";
          document.querySelectorAll("button").forEach(b => b.disabled = false);
        }
      }, 1000);
    };

    container.appendChild(btn);
  });
});

database.ref("ranking").on("value", snapshot => {
  const data = snapshot.val() || {};
  const sorted = Object.entries(data).sort((a,b)=>b[1]-a[1]);

  let html = "";
  sorted.forEach((item,index)=>{
    html += "<div class='rankItem'>"+(index+1)+"¬∫ - "+item[0]+" ("+item[1]+" votos)</div>";
  });

  document.getElementById("rankingList").innerHTML = html;
});
</script>

</body>
</html>
